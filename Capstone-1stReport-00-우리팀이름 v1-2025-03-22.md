<!-- Template for PROJECT REPORT of CapstoneDesign 2025-2H, initially written by khyoo -->
<!-- 본 파일은 2025년도 컴공 졸업프로젝트의 <1차보고서> 작성을 위한 기본 양식입니다. -->
<!-- 아래에 "*"..."*" 표시는 italic체로 출력하기 위해서 사용한 것입니다. -->
<!-- "내용"에 해당하는 부분을 지우고, 여러분 과제의 내용을 작성해 주세요. -->

# Team-Info
| (1) 과제명 | *MANSION-VOMIC : 심리적 공포 체험을 원하는 게이머를 위해 보이스클로닝, STT-LLM-TTS를 이용한 방탈출 공포게임* |
|:---|---|
| (2) 팀 번호 / 팀 이름 | *43-코코넛* |
| (3) 팀 구성원 | 손서희 (217683): 리더, *클라이언트 개발, UI/UX 디자인* <br> 이현정 (2276255): 팀원, *서버 개발 및 환경 구축, AI 개발* |
| (4) 팀 지도교수 | 심재형 교수님 |
| (5) 과제 분류 | *산학과제* |
| (6) 과제 키워드 | *게임, 보이스클로닝, STT, LLM, TTS* |
| (7) 과제 내용 요약 | *플레이어가 음성을 통해 동료 플레이어와 소통하며 저택을 탈출하는 2인 방탈출 공포게임. 플레이어의 목소리를 클로닝한 뒤, AI 기반 기술 (STT, TTS, LLM)을 활용해 적대적 개체와 동료 플레이어를 구별하기 어렵게 만들어 시각적인 공포 요소 의존도를 낮추고 심리적 공포를 자연스럽게 유도한다. 두 명의 플레이어는 상호 협동을 통해 저택을 탐험하며 탈출을 위한 도구를 모으고 이는 다중 엔딩으로 이어진다. 이를 통해 플레이어에게 새로운 공포 경험과 2인 플레이 게임의 재미 요소를 제공하고자 한다.* |

<br>

# Project-Summary
| 항목 | 내용 |
|:---|---|
| (1) 문제 정의 | *  현대 공포 게임의 패러다임은 한계에 직면했다. 대부분의 게임들은 단순히 혐오스러운 몬스터 그래픽과 갑작스러운 점프스케어에 의존하여 일시적인 공포감을 유발하지만, 이러한 방식은 곧 예측 가능해지고 플레이어의 몰입도를 급격히 감소시켜 몰입도에 부정적 영향을 준다. 특히 멀티플레이어 공포 게임은 플레이어 간 상호작용을 활용한 공포 연출이 제한적이다. 기존 게임들은 주로 환경 연출과 청각적 효과, 몬스터의 추적 패턴 등 외부적 자극에 의존하여 공포를 표현했지만, 이는 근본적인 심리적 공포를 야기하지 못한다. 본 프로젝트는 AI 음성 기술을 활용하여 이러한 문제를 해결하고자 한다. 핵심 기능은 몬스터가 플레이어의 음성을 모방하는 시스템이다. 플레이어들은 들리는 목소리가 동료의 것인지, 몬스터의 모방인지 구분할 수 없는 상황에 놓이게 되며, 이는 신뢰와 의심 사이의 긴장된 심리적 상태를 만들어낸다. 이를 통해 플레이어들은 단순한 생존 게임을 넘어서는 복합적인 심리적 경험을 하게 된다. 결과적으로 기존의 단방향적인 공포 구조를 넘어서, 신뢰와 의심이 교차하는 복합적인 심리적 공포 경험을 제공하고자 한다.<br>본 프로젝트의 주요 타겟 사용자는 새로운 게임 경험을 탐색하는 20-30대 공포게임 애호가들이다. 단순한 점프 스케어와 반복적인 몬스터 추적 패턴에 지친 플레이어들로, 게임에서 더 깊은 심리적 긴장감과 몰입을 원한다. 서브 타겟 사용자는 멀티게임 애호가들이다. 이들은 타 플레이어와의 지속적인 상호작용을 통한 게임 플레이를 즐기며, 주로 협력으로 연결감을 느낄 수 있는 게임 혹은 경쟁을 통해 긴장감을 유발하는 게임에 관심을 가진다. 본 프로젝트의 핵심은 AI 음성 기술을 활용하여 플레이어 간 상호작용의 근본적인 심리적 연결감을 변화시키는 것이다. 몬스터가 플레이어의 실시간 음성을 학습하고, 완벽하게 모방할 수 있는 시스템을 통해 플레이어들은 관계성과 심리적 긴장감을 중심으로 구성된 새로운 형태의 공포게임을 즐길 수 있다.* |
| (2) 기존연구와의 비교 | *기존 공포게임(Among Us, Phasmophobia, Monstrum)은 시각적 요소나 예측 가능한 패턴에 의존해 공포감을 유도했지만, 반복적 플레이에 따른 몰입도 하락이라는 한계를 가진다. 본 프로젝트는 몬스터가 실시간으로 플레이어의 음성을 학습하고, 이를 모방하여 심리적 공포를 유발하는 점에서 차별화된다. 이는 대화 기반의 긴장감, 전략적 사고, 플레이어 간 의심을 통한 새로운 공포 구조를 제공한다.* |
| (3) 제안 내용 | *Unity 기반의 3D 공포 게임에서 두 명의 플레이어가 제한된 시간 동안 협력하여 저택을 탈출한다. 게임은 Photon을 활용한 실시간 멀티플레이 환경에서 진행되며, 핵심은 몬스터가 플레이어의 목소리를 모방해 동료를 가장하는 시스템이다. 이를 위해 STT로 음성을 텍스트로 변환하고, LLM을 통해 상황에 맞는 대사를 생성한 후, TTS 및 보이스 클론으로 음성을 출력하여 몰입감을 극대화한다.* |
| (4) 기대효과 및 의의 | *본 프로젝트는 AI 기술을 접목하여 공포 게임의 새로운 패러다임을 제시한다. 기존 공포 게임의 시청각적 자극 중심에서 벗어나, 플레이어의 음성과 상호작용 중심의 심리적 공포로 확장된다. 이는 추리, 협동, 심리 게임 등 다양한 장르에 확장 가능하며, HCI 연구 측면에서도 의의가 있다.* |
| (5) 주요 기능 리스트 | *<br>**1. STT (Speech-to-Text)**<br>- 스페이스바 입력 시 음성 녹음 시작<br>- `STTManager.cs`가 `AudioClip`을 녹음<br>- `WavUtility.cs`를 통해 `.wav`를 `.flac`으로 변환<br>- Google STT API로 텍스트 변환<br><br>**2. LLM (프롬프팅 기반 응답 생성)**<br>- `ChatGPTManager.cs`가 텍스트를 GPT API에 전송<br>- 상황에 맞는 프롬프트와 함께 응답 대사 생성<br><br>**3. TTS (Text-to-Speech)**<br>- 생성된 텍스트를 Google TTS API로 전송<br>- MP3 음성 데이터 수신 후 Unity에서 재생<br><br>**4. Voice Cloning (사용자 음성 기반)**<br>- 게임 시작 전 플레이어 음성 샘플 녹음<br>- Voice Cloning API로 고유 음성 프로필 생성<br>- 생성된 대사는 플레이어 목소리로 재생<br><br>**5. 멀티플레이 매칭**<br>- Photon 기반 룸 생성 및 매칭<br>- 2인 입장 및 동기화 후 게임 시작<br><br>**6. 캐릭터 조작 및 상호작용**<br>- WASD 이동, Shift 달리기, Ctrl 숙이기, E 상호작용<br><br>**7. 아이템 생성 및 상호작용**<br>- 랜덤 아이템 배치 (층별/가구별)<br>- 아이템 획득, 버리기, 조합, 탈출 조건 사용<br><br>**8. 대화 시스템 (제한 녹음)**<br>- 스페이스바로 최대 5초 녹음 (총 4회 제한)<br><br>**9. 몬스터 인공지능**<br>- 상태: Idle, Mimic, Chase, Search, Attack<br>- Mimic 상태에서 보이스 클로닝 대사 사용* |

<br>

# Project-Design & Implementation
| 항목 | 내용 |
|:---|---|
| (1) 요구사항 정의 | *[유스케이스 정의], [클래스 다이어그램], [음성처리 흐름]을 통해 기능 요구를 체계화* |
| (2) 전체 시스템 구성 | ![전체 SW 시스템](https://github.com/user-attachments/assets/ad052133-1c0b-40e2-a608-9f1fb5919fe6)<br><br>전체 시스템은 Unity Client, Photon 서버, Azure 서버, 그리고 AI Voice Pipeline으로 구성된다. Unity Client는 사용자의 입력을 처리하며, Photon SDK를 통해 멀티플레이어 환경을 제공한다. 음성 입력(STT → LLM → TTS)은 Azure 서버를 통해 AI Voice Pipeline으로 전달되며, 보이스 클론 기능을 포함해 몬스터가 플레이어의 음성으로 응답하는 몰입감 높은 상호작용을 구성한다. |
| (3) 주요엔진 및 기능 설계 | **Unity Client**: 입력 처리 및 UI<br>**Photon**: 멀티플레이어 룸 관리 및 동기화<br>**Azure Server**: 클라이언트 요청 중계 및 AI Voice Pipeline 연결<br>**AI Voice Pipeline**: STT → LLM → TTS 순으로 음성 처리. 보이스 클론 적용 시 사용자 맞춤 음성 제공 |
| (4) 주요 기능의 구현 | **1. 프롬프팅된 LLM 응답 생성**<br>플레이어의 음성이 STT를 통해 텍스트로 변환되고, 이 텍스트는 게임 내 맥락을 반영한 프롬프트와 함께 LLM API에 전달된다. LLM은 몬스터의 성격, 게임 상황에 맞는 자연스러운 대사를 생성하며, 이는 이후 TTS나 보이스 클론 처리에 활용된다.<br><br>**2. 아이템 생성 및 상호작용**<br>각 층(Room)에는 사전에 정의된 확률 및 개수에 따라 아이템이 무작위로 생성된다. 아이템은 가구 위, 안, 혹은 바닥에 생성될 수 있으며, 플레이어는 아이템을 획득, 버리기, 특정 장소에서 사용 등을 통해 다양한 상호작용을 수행할 수 있다. |
| (5) 기타 | **추가 구현 계획**<br>1. 상호작용 도움말 UI<br>2. 멀미 방지용 포커스 점<br>3. 도전과제 및 업적 시스템<br>4. 선택/행동에 따라 달라지는 다중 엔딩 |
